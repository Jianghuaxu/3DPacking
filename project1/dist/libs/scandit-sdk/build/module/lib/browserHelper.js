import Cookies from"js-cookie";import UAParser from"ua-parser-js";export{UAParser};import{BrowserCompatibility}from"./browserCompatibility";export var BrowserHelper;(function(e){e.userAgentInfo=new UAParser(navigator.userAgent);e.canvas=document.createElement("canvas");function t(){if("orientation"in window){return false}else{const e="(any-pointer: coarse)";const t=window.matchMedia?.(e);if(navigator.maxTouchPoints===0||t?.media===e&&t?.matches===false){return true}else{return false}}}e.isDesktopDevice=t;function r(){function t(e,r,o){const i=e[r[0]];if(i==null){return false}if(r.length===1){return typeof i===o}else{return(typeof i==="function"||typeof i==="object")&&t(i,r.slice(1),o)}}function r(e){return e.name==="iOS"&&e.version!=null&&["11.2.2","11.2.5","11.2.6"].includes(e.version)}let o=true;let i=true;const n=[];if(!location.protocol.startsWith("http")){n.push(BrowserCompatibility.Feature.HTTP_PROTOCOL);o=i=false}if(t(window,["isSecureContext"],"boolean")&&window.isSecureContext===false){n.push(BrowserCompatibility.Feature.SECURE_CONTEXT)}if(!t(navigator,["mediaDevices","getUserMedia"],"function")&&!t(navigator,["enumerateDevices"],"function")&&!t(window,["MediaStreamTrack","getSources"],"function")){n.push(BrowserCompatibility.Feature.MEDIA_DEVICES);o=false}if(!t(window,["Worker"],"function")){n.push(BrowserCompatibility.Feature.WEB_WORKERS);o=i=false}if(!t(window,["WebAssembly"],"object")){n.push(BrowserCompatibility.Feature.WEB_ASSEMBLY);o=i=false}if(!t(window,["Blob"],"function")){n.push(BrowserCompatibility.Feature.BLOB);o=i=false}if(!t(window,["URL","createObjectURL"],"function")){n.push(BrowserCompatibility.Feature.URL_OBJECT);o=i=false}if(!t(window,["OffscreenCanvas"],"function")){n.push(BrowserCompatibility.Feature.OFFSCREEN_CANVAS)}try{if(!t(window,["WebGLRenderingContext"],"function")||e.canvas.getContext("webgl")==null&&e.canvas.getContext("experimental-webgl")==null){throw new Error}}catch{n.push(BrowserCompatibility.Feature.WEBGL)}const a=e.userAgentInfo.getOS();if(r(a)){n.push(BrowserCompatibility.Feature.WEB_ASSEMBLY_ERROR_FREE);o=i=false}return{fullSupport:o,scannerSupport:i,missingFeatures:n}}e.checkBrowserCompatibility=r;function o(){const e="scandit-device-id";let t=localStorage.getItem(e);if(t!=null&&t!==""){return t}t=Cookies.get(e);if(t!=null&&t!==""){localStorage.setItem(e,t);return t}const r=new Uint8Array(20);crypto.getRandomValues(r);t=Array.from(r).map(e=>{const t=e.toString(16);return t.length===1?`0${t}`:t}).join("");localStorage.setItem(e,t);return t}e.getDeviceId=o;function i(e){return e instanceof HTMLElement||e!=null&&typeof e==="object"&&typeof e.tagName==="string"}e.isValidHTMLElement=i})(BrowserHelper||(BrowserHelper={}));