"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataCaptureLoader=void 0;var index_1=require("../index");var browserHelper_1=require("./browserHelper");var dataCaptureWorker_1=require("./workers/dataCaptureWorker");var DataCaptureLoader=function(){function e(r){if(r){this.preloadedDataCaptureWorker=new Worker(URL.createObjectURL(dataCaptureWorker_1.dataCaptureWorkerBlob));e.load(this.preloadedDataCaptureWorker)}this.preloadedDataCaptureWorkerAvailable=r}e.load=function(e,r,a){if(r===void 0){r=false}if(a===void 0){a=false}e.postMessage({type:"load-library",deviceId:index_1.deviceId,libraryLocation:index_1.scanditDataCaptureLocation,path:window.location.pathname,preload:r,delayedRegistration:a,highEndBlurryRecognition:index_1.highEndBlurryRecognition,textRecognition:index_1.textRecognition,licenseKey:index_1.userLicenseKey,deviceModelName:browserHelper_1.BrowserHelper.userAgentInfo.getDevice().model})};e.prototype.getDataCaptureWorker=function(){if(this.preloadedDataCaptureWorkerAvailable&&this.preloadedDataCaptureWorker!=null){this.preloadedDataCaptureWorkerAvailable=false;return this.preloadedDataCaptureWorker}else{return new Worker(URL.createObjectURL(dataCaptureWorker_1.dataCaptureWorkerBlob))}};e.prototype.returnDataCaptureWorker=function(e){if(this.preloadedDataCaptureWorker==null){this.preloadedDataCaptureWorker=e}if(this.preloadedDataCaptureWorker===e){this.preloadedDataCaptureWorker.onmessage=null;this.preloadedDataCaptureWorker.postMessage({type:"reset"});this.preloadedDataCaptureWorkerAvailable=true}else{e.terminate()}};return e}();exports.DataCaptureLoader=DataCaptureLoader;